language: node_js
node_js: 11.10.0
os:
  - linux
before_script:
  - npm install -g gulp
script: gulp

cache:
  directories:
    - "node_modules"

before_deploy:
  - pwd
  - ls dist/js/
  
deploy:
  - provider: releases
    api_key:
      secure: "$GITHUB_API_KEY"
    file: dist/js/boxman.min.js
    skip_cleanup: true
    on:
      repo: sj-js/boxman
      branch: master
  - provider: npm
    email: "$NPM_EMAIL"
    api_key: "$NPM_API_TOKEN"
    skip_cleanup: true
    on:
      branch: master